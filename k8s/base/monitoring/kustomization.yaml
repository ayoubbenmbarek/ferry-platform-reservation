apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: monitoring

resources:
  - namespace.yaml
  - prometheus-config.yaml
  - prometheus-deployment.yaml
  - grafana-deployment.yaml
  - grafana-configmaps.yaml
  - exporters.yaml
  - ingress.yaml
  # Grafana Cloud integration
  - grafana-cloud-secret.yaml
  - fluentbit-config.yaml
  - fluentbit-daemonset.yaml

# ConfigMap generator for Grafana dashboards
configMapGenerator:
  - name: grafana-dashboards
    files:
      - dashboards/backend.json
      - dashboards/postgres.json
      - dashboards/redis.json

generatorOptions:
  disableNameSuffixHash: true
